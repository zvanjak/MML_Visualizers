<Window x:Class="MML_VectorField3D_Visualizer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MML_VectorField3D_Visualizer"
        mc:Ignorable="d"
        Title="Vector field 3D visualizer" Height="850" Width="1300" 
        MouseLeftButtonDown="Window_MouseLeftButtonDown" MouseLeftButtonUp="Window_MouseLeftButtonUp" 
        MouseRightButtonDown="Window_MouseRightButtonDown" MouseRightButtonUp="Window_MouseRightButtonUp" 
        MouseMove="Window_MouseMove" MouseWheel="Window_MouseWheel" KeyDown="Window_KeyDown">  
  
  <Grid Background="White">
    <Grid.RowDefinitions>
      <RowDefinition Height="40"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*"/>
      <ColumnDefinition Width="230" />
    </Grid.ColumnDefinitions>

    <TextBox x:Name="txtTitle" Grid.Row="0" Grid.Column="0" Text="Vector Field 3D" 
             HorizontalAlignment="Center" VerticalAlignment="Center" Width="500" 
             FontSize="20" FontWeight="Bold" HorizontalContentAlignment="Center" 
             VerticalContentAlignment="Center" BorderBrush="{x:Null}" IsReadOnly="True"/>

    <Viewport3D Name="myViewport3D" Grid.Row="0" Grid.RowSpan="2" Grid.Column="0"
                ClipToBounds="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                Margin="5,45,5,5"/>

    <!-- Sidebar -->
    <ScrollViewer Grid.Row="0" Grid.RowSpan="2" Grid.Column="1" VerticalScrollBarVisibility="Auto">
      <StackPanel Margin="10,10,10,10">
        <GroupBox Header="Field title" Margin="0,0,0,10">
          <TextBox x:Name="txtEditableTitle" TextWrapping="Wrap" AcceptsReturn="True" 
                   Height="40" Margin="5" VerticalScrollBarVisibility="Auto"
                   TextChanged="OnTitleTextChanged"/>
        </GroupBox>
        
        <GroupBox Header="Vector scaling" Margin="0,0,0,10">
          <StackPanel Margin="5">
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="50"/>
              </Grid.ColumnDefinitions>
              <Label Content="Magnitude scale:" Grid.Column="0" Padding="0" VerticalAlignment="Center"/>
              <TextBox x:Name="txtMagnitudeScale" Grid.Column="1" Text="1.0" IsReadOnly="True" 
                       HorizontalContentAlignment="Center" VerticalAlignment="Center"/>
            </Grid>
            <Slider x:Name="sliderMagnitudeScale" Minimum="0.1" Maximum="5.0" Value="1.0" 
                    TickFrequency="0.1" IsSnapToTickEnabled="False" Margin="0,5"
                    ValueChanged="sliderMagnitudeScale_ValueChanged"/>
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="50"/>
              </Grid.ColumnDefinitions>
              <Label Content="Arrow width:" Grid.Column="0" Padding="0" VerticalAlignment="Center"/>
              <TextBox x:Name="txtArrowWidth" Grid.Column="1" Text="1.0" IsReadOnly="True" 
                       HorizontalContentAlignment="Center" VerticalAlignment="Center"/>
            </Grid>
            <Slider x:Name="sliderArrowWidth" Minimum="0.2" Maximum="3.0" Value="1.0" 
                    TickFrequency="0.1" IsSnapToTickEnabled="False" Margin="0,5"
                    ValueChanged="sliderArrowWidth_ValueChanged"/>
          </StackPanel>
        </GroupBox>

        <GroupBox Header="Magnitude cutoff" Margin="0,0,0,10">
          <StackPanel Margin="5">
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="70"/>
              </Grid.ColumnDefinitions>
              <Label Content="Max magnitude:" Grid.Column="0" Padding="0" VerticalAlignment="Center"/>
              <TextBox x:Name="txtCutoffValue" Grid.Column="1" Text="" 
                       HorizontalContentAlignment="Right" VerticalAlignment="Center"
                       KeyDown="txtCutoffValue_KeyDown"/>
            </Grid>
            <Slider x:Name="sliderCutoff" Minimum="0" Maximum="100" Value="100" 
                    TickFrequency="1" IsSnapToTickEnabled="False" Margin="0,5"
                    ValueChanged="sliderCutoff_ValueChanged"/>
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="70"/>
              </Grid.ColumnDefinitions>
              <Label Content="Cutoff %:" Grid.Column="0" Padding="0" VerticalAlignment="Center"/>
              <TextBox x:Name="txtCutoffPercent" Grid.Column="1" Text="100%" IsReadOnly="True" 
                       HorizontalContentAlignment="Center" VerticalAlignment="Center"/>
            </Grid>
            <TextBlock x:Name="txtVectorsShown" Text="Showing: 0 / 0" Margin="0,3" FontSize="11"/>
          </StackPanel>
        </GroupBox>
        
        <GroupBox Header="Display options" Margin="0,0,0,10">
          <StackPanel Margin="5">
            <CheckBox x:Name="chkColorByMagnitude" Content="Color by magnitude" 
                      Margin="0,5" IsChecked="True" Checked="OnColorByMagnitudeChanged" Unchecked="OnColorByMagnitudeChanged"/>
            <CheckBox x:Name="chkNormalizeVectors" Content="Normalize vectors" 
                      Margin="0,5" Checked="OnNormalizeVectorsChanged" Unchecked="OnNormalizeVectorsChanged"/>
            <CheckBox x:Name="chkShowBoundingBox" Content="Show bounding box" 
                      Margin="0,5" Checked="OnShowBoundingBoxChanged" Unchecked="OnShowBoundingBoxChanged"/>
            <Grid Margin="0,5">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="80"/>
              </Grid.ColumnDefinitions>
              <Label Content="Arrow color:" Grid.Column="0" Padding="0" VerticalAlignment="Center"/>
              <ComboBox x:Name="cmbArrowColor" Grid.Column="1" SelectionChanged="cmbArrowColor_SelectionChanged">
                <ComboBoxItem Content="Blue" IsSelected="True"/>
                <ComboBoxItem Content="Red"/>
                <ComboBoxItem Content="Green"/>
                <ComboBoxItem Content="Orange"/>
                <ComboBoxItem Content="Purple"/>
                <ComboBoxItem Content="Cyan"/>
              </ComboBox>
            </Grid>
          </StackPanel>
        </GroupBox>
        
        <GroupBox Header="Camera controls" Margin="0,0,0,10">
          <StackPanel Margin="5">
            <Button x:Name="btnLookAtCenter" Content="Look at center" Margin="0,3" Click="btnLookAtCenter_Click"/>
            <Button x:Name="btnResetCamera" Content="Reset camera" Margin="0,3" Click="btnResetCamera_Click"/>
          </StackPanel>
        </GroupBox>
        
        <GroupBox Header="Field bounds" Margin="0,0,0,10">
          <StackPanel Margin="5">
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="55"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Label Content="X range:" Grid.Column="0" Padding="0"/>
              <TextBox x:Name="txtXRange" Grid.Column="1" IsReadOnly="True"/>
            </Grid>
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="55"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Label Content="Y range:" Grid.Column="0" Padding="0"/>
              <TextBox x:Name="txtYRange" Grid.Column="1" IsReadOnly="True"/>
            </Grid>
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="55"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Label Content="Z range:" Grid.Column="0" Padding="0"/>
              <TextBox x:Name="txtZRange" Grid.Column="1" IsReadOnly="True"/>
            </Grid>
          </StackPanel>
        </GroupBox>
        
        <GroupBox Header="Field info">
          <StackPanel Margin="5">
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Label Content="Num vectors:" Grid.Column="0" Padding="0"/>
              <TextBox x:Name="txtNumVectors" Grid.Column="1" IsReadOnly="True"/>
            </Grid>
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Label Content="Max mag:" Grid.Column="0" Padding="0"/>
              <TextBox x:Name="txtMaxMagnitude" Grid.Column="1" IsReadOnly="True"/>
            </Grid>
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Label Content="Min mag:" Grid.Column="0" Padding="0"/>
              <TextBox x:Name="txtMinMagnitude" Grid.Column="1" IsReadOnly="True"/>
            </Grid>
            <Grid Margin="0,3">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Label Content="Avg mag:" Grid.Column="0" Padding="0"/>
              <TextBox x:Name="txtAvgMagnitude" Grid.Column="1" IsReadOnly="True"/>
            </Grid>
          </StackPanel>
        </GroupBox>
      </StackPanel>
    </ScrollViewer>
  </Grid>
</Window>
